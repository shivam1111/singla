<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
		<template id="report_chemical_composition_document">
		    <t t-call="report.external_layout">
		        <t t-set="doc" t-value="doc.with_context({'lang':doc.partner_id.lang})" />
		        <div class = "header">
					<div class = "row">
						<div class="col-xs-3">
                				<img t-if="doc.company_id.logo" t-att-src="'data:image/png;base64,%s' % doc.company_id.logo" style="max-height: 45px;"/>
            				</div>						
					</div>		        	
		        </div>
		        <div class="page">
		            <div class="oe_structure"/>
		            <div class = "row" style = "padding: 10px;">
		            		<div class = "text-center">Test Certificate (Based on Actual Tests carried out as per our sampling plan)</div>
		            </div>
		            <div class = "row" style = "padding: 10px;">
			            <table class = "table table-condensed">
			            		<caption style="color:black;"><strong>Customer: </strong><span style = "text-transform:uppercase;"><t t-esc="doc.partner_id and doc.partner_id.name or '-'" /></span></caption>
							<tr>
			            			<td><strong>TC No:</strong> </td>
			            			<td><span style = "text-transform:uppercase;"><t t-esc="doc.name or '-'" /></span></td>
			            			<td><strong>Date: </strong></td>
			            			<td><span t-field="doc.date" t-options ='{"format": "dd/MM/yyyy"}' /></td>
			            			<td></td>
			            			<td></td>
							</tr>
			            		<tr>
			            			<td><strong>Inv No: </strong></td>
			            			<td><span style = "text-transform:uppercase;"><t t-esc="doc.invoice_no or '-'" /></span></td>
			            			<td><strong>Truck No: </strong></td>
			            			<td><span style = "text-transform:uppercase;"><t t-esc="doc.truck_no or '-'" /></span></td>
			            			<td><strong>Heat No: </strong></td>
			            			<td><span style = "text-transform:uppercase;"><t t-esc="doc.heat_no or '-'" /></span></td>
			            		</tr>
			            		<tr>
			            			<td><strong>Grade: </strong></td>
			            			<td><span style = "text-transform:uppercase;"><t t-esc="doc.grade_id and (doc.grade_id.name_str or doc.grade_id.name) or '-'" /></span></td>
			            			<td><strong>Size: </strong></td>
			            			<td><span style = "text-transform:uppercase;"><t t-esc="doc.size or '-'" /></span></td>
			            			<td><strong>Color Code: </strong></td>
			            			<td><span style = "text-transform:uppercase;"><t t-esc="doc.color_code or '-'" /></span></td>
			            		</tr>
			            </table>
			            <table class = "table table-striped table-bordered table-responsive">
			            		<caption>CHEMICAL COMPOSITION</caption>
			            		<thead class="thead-dark">
			            			<th>ELEMENTS</th>
			            			<t t-foreach="doc.line_ids" t-as="l">
			            				<th>
			            					%<t t-esc="l.element_id.code"/>
			            				</th>
			            			</t>
			            		</thead>
			            		<tbody>
			            			<tr>
			            				<td>MIN</td>
				            			<t t-foreach="doc.line_ids" t-as="l">
				            				<td style = "text-transform:uppercase;">
				            					<t t-esc="l.min_val or '-'"/>
				            				</td>
				            			</t>		            				
			            			</tr>
			            			<tr>
			            				<td>MAX</td>
				            			<t t-foreach="doc.line_ids" t-as="l">
				            				<td style = "text-transform:uppercase;">
				            					<t t-esc="l.max_val or '-'"/>
				            				</td>
				            			</t>		            						            				
			            			</tr>		
			            			<tr>
			            				<td>ACTUAL</td>
				            			<t t-foreach="doc.line_ids" t-as="l">
				            				<td style = "text-transform:uppercase;">
				            					<t t-esc="l.actual_val"/>
				            				</td>
				            			</t>		            						            				
			            			</tr>		            			            			
			            		</tbody>
			            </table>
		            </div>
					<div t-if="doc.mechanical_properties" class="row mt32 mb32" id="informations">
		                <div  class="col-xs-4 text-center">
		                    <strong>Ultimate Tensile Strength</strong>
		                    <p t-esc="doc.ultimate_tensile_strength and str(doc.ultimate_tensile_strength) + ' N/mm2' or '-'"/>
		                </div>
		                <div class="col-xs-4 text-center">
		                    <strong>Yield Strength</strong>
		                    <p t-esc="doc.yield_strength and str(doc.yield_strength) + ' N/mm2' or '-'"/>		                	
		                </div>
		                <div class="col-xs-4 text-center">
		                    <strong>Elongation %</strong>
		                    <p t-esc="doc.elongation and doc.elongation or '-'"/>		                	
		                </div>		                
					</div>		            
		            <div class = "row">
		            		<div class = "col-xs-6">
		            			<table class = "table table-striped">
		            				<caption>DECARB DEPTH</caption>
		            				<thead>
		            					<th>COMPLETE</th>
		            					<th>PARTIAL</th>
		            					<th>GRAIN SIZE</th>
		            				</thead>
		            				<tbody>
		            					<tr>
		            						<td><t t-esc="doc.complete_decarb or '-'" /></td>
		            						<td><t t-esc="doc.partial_decarb or '-'" /></td>
		            						<td><t t-esc="doc.grain_size or '-'" /></td>
		            					</tr>
		            				</tbody>
		            			</table>
		            		</div>
		            		<div class = "col-xs-6">
		            			<table class = "table table-striped">
		            				<caption>HARDNESS(BH No.)</caption>
		            				<thead>
	            						<th>MIN</th>
	            						<th>MAX</th>
		            				</thead>
		            				<tbody>
		            					<tr>
		            						<td><t t-esc="doc.min_hardness or '-'" /></td>
		            						<td><t t-esc="doc.max_hardness or '-'" /></td>
		            					</tr>
		            				</tbody>
		            			</table>
		            		</div>
		            </div>
		            <div class = "row">
			            <div class = "col-xs-6">
			            		<table class = "table table-striped">
			            			<caption>QUANTITY DETAILS</caption>
			            			<thead>
			            				<th>LENGTH(MM)</th>
			            				<th>NO OF PCS</th>
			            			</thead>
			            			<tbody>
			            				<t t-if = "doc.length_detail_ids">
	            							<t t-foreach="doc.length_detail_ids"  t-as = "l">
	            								<tr>
	            									<td><t t-esc='l.name' /></td>
	            									<td><t t-esc='l.no_of_pcs' /></td>
	            								</tr>
	            							</t>
            							</t>	
            							<t t-if = "not doc.length_detail_ids">
            								<tr><td>-</td><td>-</td></tr>
            							</t>
			            			</tbody>
			            		</table>			            			            		
			            </div>
			            <div class = "col-xs-6" >
			            		<table class = "table table-striped">
			            			<caption>INCLUSION RATING</caption>
			            			<thead>
			            				<th>TYPE</th>
			            				<th>A</th>
			            				<th>B</th>
			            				<th>C</th>
			            				<th>D</th>
			            			</thead>	
			            			<tbody>
									<t t-if = "doc.inclusion_rating_ids">
				            				<tr>
				            					<td>THIN</td>
				 			            		<t t-foreach="doc.inclusion_rating_ids" t-as = "l">
						            				<td><t t-esc="l.thin or '-'" /></td>
							            		</t>				            					
				            				</tr>
				            				<tr>
				            					<td>THICK</td>
				 			            		<t t-foreach="doc.inclusion_rating_ids" t-as = "l">
						            				<td><t t-esc="l.thick or '-'" /></td>
							            		</t>				            					
				            				</tr>				            														
									</t>
									<t t-if = "not doc.inclusion_rating_ids">
										<tr>
											<td>THIN</td>
											<td>-</td>
											<td>-</td>
											<td>-</td>
											<td>-</td>											
										</tr>
										<tr>
											<td>THICK</td>
											<td>-</td>
											<td>-</td>
											<td>-</td>
											<td>-</td>											
										</tr>											
									</t>
									
			            			</tbody>
			            		</table>
			            </div>
		            	</div>
		            	<t t-if = "doc.attested">
			            	<div style = "page-break-before:always;padding: 10px;" class = "row">
			            		<strong>REMARKS</strong>
		            			<p>
		            			1. Fully killed by 'Al' &amp; 'Si' and made to attain fine grain precise<br/>
		            			2. Material is free from lead &amp; mercury<br/>
		            			3. 'Al' added to keep Al inn the range 0.020% to 0.050%<br/>
		            			4. Product does not contain any radioactive material.<br/>
		            			</p>
			            	</div>
			            	<div style = "border:1px solid black;" class = "row">
			            		<div style = "border-right:1px solid black;height:100px;" class = "col-xs-4">
			            			<span style = "position:absolute;bottom:0px;text-align:center;">Prepared By</span>
			            		</div>
			            		<div style = "border-right:1px solid black;height:100px;" class = "col-xs-4">
			            			<span style = "position:absolute;bottom:0px;text-align:center;">Checked By</span>
			            		</div>
			            		<div style = "height:100px;" class = "col-xs-4">
			            			<span style = "position:absolute;bottom:0px;text-align:center;">Authorised By</span>
			            		</div>		            				            		
			            	</div>		            	
		            	</t>
		        </div>
		        <div class = "footer">
		        </div>
		    </t>
		</template>
		<template id="report_chemical_compositions">
		    <t t-call="report.html_container">
		        <t t-foreach="docs" t-as="doc">
		            <t t-call="chemical_compositions.report_chemical_composition_document" t-lang="doc.partner_id.lang"/>
		        </t>
		    </t>
		</template>

        <report 
            id="report_chemical_composition"
            string="Chemical Composition"
            model="chemical.composition" 
            report_type="qweb-pdf"
            file="chemical_compositions.chemical_composition_report" 
            name="chemical_compositions.report_chemical_compositions" 
        />
    </data>
</odoo>
